<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Hóa đơn - MyShop Streetwear</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      background-color: #f8f9fa;
    }
    .invoice-box {
      background: #fff;
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      max-width: 900px;
      margin: auto;
    }
    .invoice-header {
      border-bottom: 2px solid #000;
      padding-bottom: 15px;
      margin-bottom: 25px;
    }
    .invoice-header h2 {
      font-weight: 700;
      letter-spacing: 1px;
    }
    .table th {
      background-color: #212529;
      color: white;
    }
    .total-line {
      font-weight: bold;
      font-size: 1.2rem;
    }
    .brand {
      font-weight: 700;
      color: #000;
    }
  </style>
</head>
<body>

<div th:replace="~{layout/_fragments :: main-header}"></div>

<div class="container py-5">
  <div class="invoice-box">

    <!-- Header -->
    <div class="invoice-header d-flex justify-content-between align-items-center">
      <div>
        <h2>HÓA ĐƠN THANH TOÁN</h2>
        <p class="text-muted mb-0">Cảm ơn bạn đã mua hàng tại <span class="brand">MyShop Streetwear</span></p>
      </div>
      <div class="text-end">
        <p><strong>Mã đơn hàng:</strong> <span th:text="${order.id}"></span></p>
        <p><strong>Ngày đặt:</strong> <span th:text="${#dates.format(order.orderDate, 'dd/MM/yyyy HH:mm')}"></span></p>
      </div>
    </div>

    <!-- Thông tin khách hàng -->
    <div class="mb-4">
      <h5 class="border-bottom pb-2 mb-3"><i class="fa-solid fa-user"></i> Thông tin khách hàng</h5>
      <div class="row">
        <div class="col-md-6">
          <p><strong>Họ tên:</strong> <span th:text="${user.fullName}"></span></p>
          <p><strong>Email:</strong> <span th:text="${user.email}"></span></p>
          <p><strong>Số điện thoại:</strong> <span th:text="${user.phoneNumber}"></span></p>
        </div>
        <div class="col-md-6">
          <p><strong>Địa chỉ giao hàng:</strong> <span th:text="${order.address}"></span></p>
          <p><strong>Phương thức thanh toán:</strong> <span th:text="${order.paymentMethod}"></span></p>
        </div>
      </div>
    </div>

    <!-- Chi tiết sản phẩm -->
    <h5 class="border-bottom pb-2 mb-3"><i class="fa-solid fa-box"></i> Chi tiết sản phẩm</h5>
	<table class="table table-bordered text-center align-middle">
	  <thead>
	    <tr>
	      <th>#</th>
	      <th>Tên sản phẩm</th>
	      <th>Size</th>
	      <th>Giá</th>
	      <th>Số lượng</th>
	      <th>Tổng</th>
	    </tr>
	  </thead>
	  <tbody>
	    <tr th:each="detail, iterStat : ${order.orderDetails}">
	      <td th:text="${iterStat.index + 1}"></td>
	      <td th:text="${detail.productName}"></td>
	      <td th:text="${detail.size}"></td> <!-- ✅ Cột size -->
	      <td th:text="${#numbers.formatDecimal(detail.price, 0, 'COMMA', 0, 'POINT')} + 'đ'"></td>
	      <td th:text="${detail.quantity}"></td>
	      <td th:text="${#numbers.formatDecimal(detail.total, 0, 'COMMA', 0, 'POINT')} + 'đ'"></td>
	    </tr>
	  </tbody>
	</table>



    <!-- Tổng tiền -->
    <div class="text-end mt-4">
      <h5 class="total-line">
        Tổng cộng: 
        <span class="text-danger" 
              th:text="${#numbers.formatDecimal(order.total, 0, 'COMMA', 0, 'POINT')} + 'đ'"></span>
      </h5>
    </div>

    <!-- Footer -->
    <div class="text-center mt-5">
      <a href="/lichsumuahang" class="btn btn-outline-dark me-2">
        <i class="fa-solid fa-clock-rotate-left"></i> Lịch sử mua hàng
      </a>
      <button class="btn btn-dark" onclick="window.print()">
        <i class="fa-solid fa-print"></i> In hóa đơn
      </button>
    </div>

  </div>
</div>

<div th:replace="~{layout/_fragments :: main-footer}"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
